<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Giovanni Fossati" />


<title>Project Write-Up</title>

<script src="write_up_3_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="write_up_3_files/bootstrap-2.3.2/css/cerulean.min.css" rel="stylesheet" />
<link href="write_up_3_files/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="write_up_3_files/bootstrap-2.3.2/js/bootstrap.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="gf_small_touches.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Project Write-Up</h1>
<h4 class="author"><em>Giovanni Fossati</em></h4>
</div>


<p>The choice of a random forest as an ensemble method is due to its ability to handle multi-class problems and its overall competitive performance.</p>
<hr />
<div id="the-data-set" class="section level2">
<h2>THE DATA SET</h2>
<div id="structure" class="section level3">
<h3>Structure</h3>
<p>The dataset comprises 160 variables:</p>
<ul>
<li>152 actual <em>predictors</em>, <em>i.e.</em> the sensor data.</li>
<li>1 is the quality <em>class</em> of the exercise (<code>classe</code>, taking values <em>A</em>, <em>B</em>, <em>C</em>, <em>D</em>, <em>E</em>).</li>
<li>7 are auxiliary variables:
<ul>
<li>the <em>user</em> name (<code>user_name</code>).</li>
<li>3 time stamp related variables: <code>raw_timestamp_part_1</code>, <code>raw_timestamp_part_2</code>, <code>cvtd_timestamp</code>.</li>
<li>2 <em>exercise window</em> markers/counters: <code>new_window</code>, <code>num_window</code>.</li>
</ul></li>
</ul>
</div>
<div id="the-sensor-data" class="section level3">
<h3>The sensor data</h3>
<p>As described in the paper by Velloso et al. [REF], four <em>inertial measurement units</em> (IMU) where setup, placed<br />on <em>belt</em>, <em>arm</em>, <em>forearm</em>, <em>dumbbell</em>. Each sensor measured 3-axes acceleration, gyroscope and magnetometer data at high cadence (45 Hz). These data were processed to yield 13 timed variables for each sensor:</p>
<ul>
<li><em>total acceleration</em>.</li>
<li><em>roll</em>, <em>pitch</em>, <em>yaw</em> angles.</li>
<li><em>x</em>, <em>y</em>, <em>z</em> values for <em>gyroscope</em>, <em>acceleleration</em>, and <em>magnetometer</em>.</li>
</ul>
<p>For instance, for the <em>belt</em> sensor the <em>basic timed data</em> are: <code>total_accel_belt</code>, <code>roll_belt</code>, <code>pitch_belt</code>, <code>yaw_belt</code>, <code>gyros_belt_x</code>, <code>gyros_belt_y</code>, <code>gyros_belt_z</code>, <code>accel_belt_x</code>, <code>accel_belt_y</code>, <code>accel_belt_z</code>, <code>magnet_belt_x</code>, <code>magnet_belt_y</code>, <code>magnet_belt_z</code>.</p>
<p>The dataset therefore comprises <span class="math">\(4 \times 13 = 52\)</span> <em>basic timed data</em>.</p>
<p>In addition to these, several statistical summaries are computed and reported for each exercise <em>window</em>, for each sensor:</p>
<ul>
<li>For <code>total_accel</code>, its variance <code>var_accel</code>.</li>
<li>For each of the three angles: <code>avg</code>, <code>stddev</code>, <code>var</code>, <code>kurtosis</code>, <code>skewness</code>, <code>max</code>, <code>min</code>, <code>amplitude</code> (<span class="math">\(3 \times 8\)</span> variables).</li>
</ul>
<p>These <span class="math">\(1 + 24 = 25\)</span> statistical summaries for each sensor add another <span class="math">\(100\)</span> variables to the dataset for a total of <span class="math">\(152\)</span> variables.</p>
<p>It is worth emphasizing that the dataset presents <em>timed</em> and <em>summary</em> variables all together in one table. While this may be practically convenient, it makes this dataset <em>un-tidy</em> by combining variables of different nature. Fortunately the two types of variables can be easily separated on the basis of the value of the <code>new_window</code> auxiliary variable, which has value <code>no</code> for entries corresponding to timed data, and <code>yes</code> for their statistical summaries over each exercise window.</p>
<hr />
</div>
</div>
<div id="data-preparation" class="section level2">
<h2>DATA PREPARATION</h2>
<div id="loading" class="section level3">
<h3>Loading</h3>
<pre class="sourceCode r"><code class="sourceCode r">full &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./pml-training.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;#DIV/0!&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;NA&quot;</span>), <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
full &lt;-<span class="st"> </span><span class="kw">add_new_variables</span>(full)
alt.full &lt;-<span class="st"> </span><span class="kw">tidy_df</span>(full)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">TEST &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./pml-testing.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;#DIV/0!&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot;NA&quot;</span>), <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)
alt.TEST &lt;-<span class="st"> </span><span class="kw">tidy_df</span>(TEST)</code></pre>
</div>
<div id="cleaningtidying" class="section level3">
<h3>Cleaning/Tidying</h3>
<p>Some variables should be discarded because associated with very specific aspects of the experiment that should be irrelevant from the point of view of its goal, such as <em>window</em> flags and <em>time stamps</em>.<br />These are the excluded variables: <code>X</code>, <code>user_name</code>, <code>new_window</code>, <code>num_window</code>, <code>cvtd_timestamp</code>, <code>raw_timestamp_part_1</code>, <code>raw_timestamp_part_2</code>.</p>
<p>Beside their intrinsic irrelevance, keeping these in would likely strongly drive the results in a completely spurious and meaningless way, because for instance the algorithm may hook on the <code>user_name</code> or <code>num_window</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">alt.full &lt;-<span class="st"> </span><span class="kw">subset</span>(alt.full, new_window ==<span class="st"> &quot;no&quot;</span>)
alt.full.good &lt;-<span class="st"> </span><span class="kw">select_proper_vars</span>(alt.full)
alt.TEST.good &lt;-<span class="st"> </span><span class="kw">select_proper_vars</span>(alt.TEST)
alt.user &lt;-<span class="st"> </span>alt.full$user_name</code></pre>
</div>
<div id="individual-measurements-and-summaries-the-new_window-variable" class="section level3">
<h3>Individual measurements and <em>summaries</em> : the <code>new_window</code> variable</h3>
<p>To the best of my understanding, the dataset combines two different kinds of <em>observations</em>:</p>
<ul>
<li>single measurements of the main observables from the sensors, with some time cadence, and organized in <em>windows</em>, which are numbered (<code>num_window</code> variable).<br />These data have <code>new_window == &quot;no&quot;</code>.</li>
<li>statistical summaries of the measurements of each main observable over each <em>window</em>.<br />These data have <code>new_window == &quot;yes&quot;</code>, and</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># columns without ANY NA</span>
alt.tt &lt;-<span class="st"> </span><span class="kw">colSums</span>(<span class="kw">is.na</span>(alt.full.good)) ==<span class="st"> </span><span class="dv">0</span>

alt.full.select &lt;-<span class="st"> </span>alt.full.good[, alt.tt]
alt.TEST.select &lt;-<span class="st"> </span>alt.TEST.good[, alt.tt]

<span class="co"># alt.full.noNA &lt;- alt.full.good[, alt.tt]</span>
<span class="co"># alt.TEST.noNA &lt;- alt.TEST.good[, alt.tt]</span>
<span class="co"># alt.full.select &lt;- alt.full.noNA</span>
<span class="co"># alt.TEST.select &lt;- alt.TEST.noNA</span></code></pre>
</div>
<div id="some-exploratory-plots" class="section level3">
<h3>Some exploratory plots</h3>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>alt.full
<span class="co">#   8 = roll_belt</span>
<span class="co">#   9 = pitch_belt</span>
<span class="co">#  10 = yaw_belt</span>
<span class="co">#  46 = roll_arm</span>
<span class="co"># 122 = roll_forearm</span>
ii &lt;-<span class="st"> </span><span class="dv">8</span>

p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>user_name)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) +<span class="st"> </span><span class="kw">ggtitle</span>(<span class="kw">colnames</span>(df)[ii]) 
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>classe)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) 
<span class="kw">grid.arrange</span>(p1, p2, <span class="dt">nrow=</span><span class="dv">2</span>)</code></pre>
<p><img src="figures/plots-examine2a.png" title="plot of chunk plots-examine2a" alt="plot of chunk plots-examine2a" width="600" style="display: block; margin: auto auto auto 0;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>alt.full
<span class="co">#   8 = roll_belt</span>
<span class="co">#   9 = pitch_belt</span>
<span class="co">#  10 = yaw_belt</span>
<span class="co">#  46 = roll_arm</span>
<span class="co"># 122 = roll_forearm</span>
ii &lt;-<span class="st"> </span><span class="dv">46</span>

title_string &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">colnames</span>(df)[ii], <span class="st">&quot;by user and classe&quot;</span>, <span class="dt">sep=</span><span class="st">&quot; &quot;</span>)
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>user_name)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) 
p1 &lt;-<span class="st"> </span>p1 +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) +<span class="st"> </span><span class="kw">ggtitle</span>(title_string)
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>classe)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) 
p2 &lt;-<span class="st"> </span>p2 +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) 
<span class="co"># p1 &lt;- ggplot(df, aes(1:nrow(df), df[, ii])) + theme_bw() + geom_point(aes(col=user_name)) + theme(legend.position = &quot;top&quot;) + ylab(colnames(df)[ii]) + ggtitle(colnames(df)[ii]) </span>
<span class="co"># p2 &lt;- ggplot(df, aes(1:nrow(df), df[, ii])) + theme_bw() + geom_point(aes(col=classe)) + theme(legend.position = &quot;bottom&quot;) + ylab(colnames(df)[ii]) </span>
<span class="kw">grid.arrange</span>(p1, p2, <span class="dt">nrow=</span><span class="dv">2</span>)</code></pre>
<p><img src="figures/plots-examine2b.png" title="plot of chunk plots-examine2b" alt="plot of chunk plots-examine2b" width="600" style="display: block; margin: auto auto auto 0;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>alt.full
<span class="co">#   8 = roll_belt</span>
<span class="co">#   9 = pitch_belt</span>
<span class="co">#  10 = yaw_belt</span>
<span class="co">#  46 = roll_arm</span>
<span class="co"># 122 = roll_forearm</span>
ii &lt;-<span class="st"> </span><span class="dv">9</span>

title_string &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">colnames</span>(df)[ii], <span class="st">&quot;by user and classe&quot;</span>, <span class="dt">sep=</span><span class="st">&quot; &quot;</span>)
p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>user_name)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) 
p1 &lt;-<span class="st"> </span>p1 +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) +<span class="st"> </span><span class="kw">ggtitle</span>(title_string)
p2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(df), df[, ii])) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>classe)) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) 
p2 &lt;-<span class="st"> </span>p2 +<span class="st"> </span><span class="kw">ylab</span>(<span class="kw">colnames</span>(df)[ii]) 
<span class="kw">grid.arrange</span>(p1, p2, <span class="dt">nrow=</span><span class="dv">2</span>)</code></pre>
<p><img src="figures/plots-examine2c.png" title="plot of chunk plots-examine2c" alt="plot of chunk plots-examine2c" width="600" style="display: block; margin: auto auto auto 0;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>alt.full.select 
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(pitch_arm, roll_arm)) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>classe)) +<span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;pitch_arm vs. roll_arm by classe&quot;</span>)
p +<span class="st"> </span><span class="kw">facet_grid</span>(classe ~<span class="st"> </span>.)</code></pre>
<p><img src="figures/plots-more_1.png" title="plot of chunk plots-more_1" alt="plot of chunk plots-more_1" width="600" style="display: block; margin: auto auto auto 0;" /></p>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>alt.full.select 
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(pitch_forearm, roll_forearm)) +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>classe)) +<span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;pitch_forearm vs. roll_forearm by classe&quot;</span>)
p +<span class="st"> </span><span class="kw">facet_grid</span>(classe ~<span class="st"> </span>.)</code></pre>
<p><img src="figures/plots-more_2.png" title="plot of chunk plots-more_2" alt="plot of chunk plots-more_2" width="600" style="display: block; margin: auto auto auto 0;" /></p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with --self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
